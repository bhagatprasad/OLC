<section class="section bg-gradient-light position-relative overflow-hidden">
    <!-- Background Elements -->
    <div class="position-absolute top-0 end-0 w-50 h-100 opacity-10">
        <div class="abstract-shape-1"></div>
    </div>
    <div class="position-absolute bottom-0 start-0 w-50 h-100 opacity-10">
        <div class="abstract-shape-2"></div>
    </div>

    <div class="container position-relative z-1">
        <!-- Section Header -->
        <div class="row justify-content-center mb-6">
            <div class="col-lg-10 text-center">
                <div class="section-header-wrapper">
                    <span class="section-badge badge bg-primary-soft text-primary rounded-pill px-4 py-2 mb-3">
                        <i class="fas fa-cogs me-2"></i>Behind the Scenes
                    </span>
                    <h2 class="display-4 fw-bold mb-3">
                        <span class="text-gradient-primary">Seamless</span> Settlement Process
                    </h2>
                    <p class="lead text-muted mb-0">
                        How your payments move securely from card to bank account in real-time
                    </p>
                </div>
            </div>
        </div>

        <!-- Process Visualization -->
        <div class="row justify-content-center mb-7">
            <div class="col-lg-12">
                <div class="process-visualization">
                    <div class="timeline-track">
                        <!-- Step 1 -->
                        <div class="timeline-step step-1">
                            <div class="step-marker">
                                <div class="marker-circle bg-primary-gradient">
                                    <i class="fas fa-credit-card"></i>
                                </div>
                                <div class="marker-pulse"></div>
                            </div>
                            <div class="step-content">
                                <div class="step-card">
                                    <div class="step-header">
                                        <h4 class="fw-bold mb-2">1. Payment Initiation</h4>
                                        <div class="step-tag">
                                            <span class="badge bg-primary">Customer Action</span>
                                        </div>
                                    </div>
                                    <p class="text-muted mb-0">
                                        Payer enters card details on Betalen's secure checkout form.
                                        Real-time validation ensures accuracy before proceeding.
                                    </p>
                                </div>
                            </div>
                        </div>

                        <!-- Step 2 -->
                        <div class="timeline-step step-2">
                            <div class="step-marker">
                                <div class="marker-circle bg-warning-gradient">
                                    <i class="fas fa-shield-alt"></i>
                                </div>
                                <div class="marker-pulse"></div>
                            </div>
                            <div class="step-content">
                                <div class="step-card">
                                    <div class="step-header">
                                        <h4 class="fw-bold mb-2">2. Secure Authentication</h4>
                                        <div class="step-tag">
                                            <span class="badge bg-warning">Security Check</span>
                                        </div>
                                    </div>
                                    <p class="text-muted mb-0">
                                        3D Secure/OTP authentication via bank gateway.
                                        PCI DSS compliant encryption protects sensitive data.
                                    </p>
                                    <div class="security-features mt-3">
                                        <div class="d-flex gap-2">
                                            <span class="security-badge">
                                                <i class="fas fa-lock"></i> PCI DSS
                                            </span>
                                            <span class="security-badge">
                                                <i class="fas fa-key"></i> 256-bit
                                            </span>
                                            <span class="security-badge">
                                                <i class="fas fa-fingerprint"></i> 3D Secure
                                            </span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Step 3 -->
                        <div class="timeline-step step-3">
                            <div class="step-marker">
                                <div class="marker-circle bg-success-gradient">
                                    <i class="fas fa-exchange-alt"></i>
                                </div>
                                <div class="marker-pulse"></div>
                            </div>
                            <div class="step-content">
                                <div class="step-card">
                                    <div class="step-header">
                                        <h4 class="fw-bold mb-2">3. Transaction Processing</h4>
                                        <div class="step-tag">
                                            <span class="badge bg-success">Real-Time</span>
                                        </div>
                                    </div>
                                    <p class="text-muted mb-0">
                                        Instant fund transfer from payer's card to acquiring bank.
                                        Real-time status updates and confirmation emails.
                                    </p>
                                    <div class="processing-stats mt-3">
                                        <div class="row text-center">
                                            <div class="col-4">
                                                <div class="stat-item">
                                                    <div class="stat-value text-success">99.9%</div>
                                                    <div class="stat-label">Success Rate</div>
                                                </div>
                                            </div>
                                            <div class="col-4">
                                                <div class="stat-item">
                                                    <div class="stat-value text-primary">&lt;2s</div>
                                                    <div class="stat-label">Processing Time</div>
                                                </div>
                                            </div>
                                            <div class="col-4">
                                                <div class="stat-item">
                                                    <div class="stat-value text-warning">24/7</div>
                                                    <div class="stat-label">Availability</div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Step 4 -->
                        <div class="timeline-step step-4">
                            <div class="step-marker">
                                <div class="marker-circle bg-info-gradient">
                                    <i class="fas fa-university"></i>
                                </div>
                                <div class="marker-pulse"></div>
                            </div>
                            <div class="step-content">
                                <div class="step-card">
                                    <div class="step-header">
                                        <h4 class="fw-bold mb-2">4. Bank Settlement</h4>
                                        <div class="step-tag">
                                            <span class="badge bg-info">Fund Transfer</span>
                                        </div>
                                    </div>
                                    <p class="text-muted mb-0">
                                        Funds settled to merchant's bank account as per chosen timeline.
                                        Instant (T+0), Next Day (T+1), or Weekly (T+7) options.
                                    </p>
                                    <div class="settlement-options mt-3">
                                        <div class="d-flex justify-content-center gap-3">
                                            <div class="option-card" data-tooltip="Instant Settlement">
                                                <div class="option-icon bg-success">
                                                    <i class="fas fa-bolt"></i>
                                                </div>
                                                <div class="option-label">T+0</div>
                                            </div>
                                            <div class="option-card" data-tooltip="Next Day Settlement">
                                                <div class="option-icon bg-primary">
                                                    <i class="fas fa-sun"></i>
                                                </div>
                                                <div class="option-label">T+1</div>
                                            </div>
                                            <div class="option-card" data-tooltip="Weekly Settlement">
                                                <div class="option-icon bg-info">
                                                    <i class="fas fa-calendar-week"></i>
                                                </div>
                                                <div class="option-label">T+7</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Detailed Explanation -->
        <div class="row justify-content-center">
            <div class="col-lg-10">
                <div class="detailed-explanation card border-0 shadow-lg">
                    <div class="card-body p-5">
                        <div class="row align-items-center">
                            <div class="col-lg-8">
                                <h3 class="fw-bold mb-3">Complete End-to-End Protection</h3>
                                <div class="process-details">
                                    <div class="detail-item d-flex mb-3">
                                        <div class="detail-icon bg-primary-soft text-primary rounded-circle p-3 me-4">
                                            <i class="fas fa-user-shield"></i>
                                        </div>
                                        <div>
                                            <h5 class="fw-bold mb-2">Dual Confirmation System</h5>
                                            <p class="text-muted mb-0">
                                                Both payer and merchant receive instant payment confirmations via
                                                email and SMS. Real-time dashboard updates for complete transparency.
                                            </p>
                                        </div>
                                    </div>

                                    <div class="detail-item d-flex mb-3">
                                        <div class="detail-icon bg-warning-soft text-warning rounded-circle p-3 me-4">
                                            <i class="fas fa-chart-line"></i>
                                        </div>
                                        <div>
                                            <h5 class="fw-bold mb-2">Real-Time Analytics</h5>
                                            <p class="text-muted mb-0">
                                                Track every transaction with detailed analytics. Monitor settlement
                                                status, generate reports, and reconcile payments effortlessly.
                                            </p>
                                        </div>
                                    </div>

                                    <div class="detail-item d-flex">
                                        <div class="detail-icon bg-success-soft text-success rounded-circle p-3 me-4">
                                            <i class="fas fa-handshake"></i>
                                        </div>
                                        <div>
                                            <h5 class="fw-bold mb-2">Automated Reconciliation</h5>
                                            <p class="text-muted mb-0">
                                                Automatic matching of payments with invoices. Reduce manual effort
                                                and eliminate errors with our smart reconciliation system.
                                            </p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-4 mt-4 mt-lg-0">
                                <div class="security-highlights text-center">
                                    <div class="highlight-card bg-primary-gradient text-white rounded-3 p-4 mb-4">
                                        <i class="fas fa-award fa-3x mb-3"></i>
                                        <h4 class="fw-bold mb-2">RBI Approved</h4>
                                        <p class="mb-0 opacity-75">Authorized Payment Aggregator</p>
                                    </div>
                                    <div class="highlight-card bg-dark text-white rounded-3 p-4">
                                        <i class="fas fa-shield-check fa-3x mb-3"></i>
                                        <h4 class="fw-bold mb-2">Zero Fraud Liability</h4>
                                        <p class="mb-0 opacity-75">Protected by Advanced Fraud Detection</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Tech Stack -->
        <div class="row mt-7">
            <div class="col-lg-12">
                <div class="tech-stack-wrapper">
                    <h4 class="text-center fw-bold mb-4">Powered by Industry-Leading Technology</h4>
                    <div class="tech-logos d-flex justify-content-center align-items-center flex-wrap gap-5">
                        <div class="tech-logo">
                            <i class="fab fa-aws fa-3x text-warning"></i>
                            <span class="tech-label">AWS</span>
                        </div>
                        <div class="tech-logo">
                            <i class="fas fa-database fa-3x text-primary"></i>
                            <span class="tech-label">PostgreSQL</span>
                        </div>
                        <div class="tech-logo">
                            <i class="fab fa-node-js fa-3x text-success"></i>
                            <span class="tech-label">Node.js</span>
                        </div>
                        <div class="tech-logo">
                            <i class="fas fa-lock fa-3x text-info"></i>
                            <span class="tech-label">3D Secure 2.0</span>
                        </div>
                        <div class="tech-logo">
                            <i class="fas fa-cloud fa-3x text-primary"></i>
                            <span class="tech-label">Cloudflare</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<script src="~/js/jquery/jquery.min.js"></script>
<script>
    // Add interactivity to settlement process section
    document.addEventListener('DOMContentLoaded', function() {
        // Animate timeline steps on scroll
        const timelineSteps = document.querySelectorAll('.timeline-step');

        const observer = new IntersectionObserver(function(entries) {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    const step = entry.target;
                    step.style.animationDelay = step.dataset.delay || '0s';
                    step.classList.add('animate__animated', 'animate__fadeInUp');

                    // Animate marker
                    const marker = step.querySelector('.marker-circle');
                    marker.style.animation = 'bounceIn 0.6s ease';

                    setTimeout(() => {
                        marker.style.animation = '';
                    }, 600);
                }
            });
        }, {
            threshold: 0.2,
            rootMargin: '0px 0px -100px 0px'
        });

        timelineSteps.forEach((step, index) => {
            step.dataset.delay = `${index * 0.3}s`;
            observer.observe(step);
        });

        // Add hover effects to step cards
        const stepCards = document.querySelectorAll('.step-card');
        stepCards.forEach(card => {
            card.addEventListener('mouseenter', function() {
                const marker = this.closest('.timeline-step').querySelector('.marker-circle');
                marker.style.transform = 'scale(1.2)';
                marker.style.boxShadow = '0 15px 30px rgba(0,0,0,0.2)';
            });

            card.addEventListener('mouseleave', function() {
                const marker = this.closest('.timeline-step').querySelector('.marker-circle');
                marker.style.transform = 'scale(1)';
                marker.style.boxShadow = '0 10px 20px rgba(0,0,0,0.1)';
            });
        });

        // Animate settlement options
        const optionCards = document.querySelectorAll('.option-card');
        optionCards.forEach(card => {
            card.addEventListener('mouseenter', function() {
                const icon = this.querySelector('.option-icon');
                icon.style.transform = 'scale(1.2) rotate(5deg)';
            });

            card.addEventListener('mouseleave', function() {
                const icon = this.querySelector('.option-icon');
                icon.style.transform = 'scale(1) rotate(0deg)';
            });
        });

        // Add counting animation to statistics
        function animateStatistics() {
            const statValues = document.querySelectorAll('.stat-value');
            statValues.forEach(value => {
                const text = value.textContent;
                if (text.includes('%') || text.includes('s') || text.includes('/')) {
                    value.style.animation = 'countUp 1s ease';
                    setTimeout(() => {
                        value.style.animation = '';
                    }, 1000);
                }
            });
        }

        // Animate when section comes into view
        const statsObserver = new IntersectionObserver(function(entries) {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    animateStatistics();
                }
            });
        }, { threshold: 0.5 });

        const processingStats = document.querySelector('.processing-stats');
        if (processingStats) {
            statsObserver.observe(processingStats);
        }

        // Add tech logo animations
        const techLogos = document.querySelectorAll('.tech-logo');
        techLogos.forEach((logo, index) => {
            logo.style.animationDelay = `${index * 0.1}s`;
            logo.classList.add('animate__animated', 'animate__fadeIn');
        });

        // Add CSS for animations
        const style = document.createElement('style');
        style.textContent = `
            keyframes bounceIn {
                0% {
                    transform: scale(0.3);
                    opacity: 0;
                }
                50% {
                    transform: scale(1.1);
                }
                100% {
                    transform: scale(1);
                    opacity: 1;
                }
            }

            keyframes countUp {
                0% {
                    transform: scale(0.8);
                    opacity: 0;
                }
                100% {
                    transform: scale(1);
                    opacity: 1;
                }
            }

            .animate__animated {
                animation-duration: 1s;
                animation-fill-mode: both;
            }

            .animate__fadeIn {
                animation-name: fadeIn;
            }

            .animate__fadeInUp {
                animation-name: fadeInUp;
            }

            keyframes fadeIn {
                from { opacity: 0; }
                to { opacity: 1; }
            }

            keyframes fadeInUp {
                from {
                    opacity: 0;
                    transform: translate3d(0, 30px, 0);
                }
                to {
                    opacity: 1;
                    transform: translate3d(0, 0, 0);
                }
            }
        `;
        document.head.appendChild(style);

        // Auto-animate timeline markers
        setInterval(() => {
            const randomStep = Math.floor(Math.random() * timelineSteps.length);
            const marker = timelineSteps[randomStep].querySelector('.marker-pulse');

            marker.style.animation = 'none';
            void marker.offsetWidth; // Trigger reflow
            marker.style.animation = 'pulse 2s infinite';
        }, 3000);
    });
</script>